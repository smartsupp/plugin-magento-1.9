<?php
/**
 * Smartsupp Live Chat integration module.
 * 
 * @package   Smartsupp
 * @author    Smartsupp <vladimir@smartsupp.com>
 * @link      http://www.smartsupp.com
 * @copyright 2015 Smartsupp.com
 * @license   GPL-2.0+
 *
 * Plugin Name:       Smartsupp Live Chat
 * Plugin URI:        http://www.smartsupp.com
 * Description:       Adds Smartsupp Live Chat code to Magento.
 * Version:           1.0.0
 * Author:            Smartsupp
 * Author URI:        http://www.smartsupp.com
 * Text Domain:       smartsupp
 * License:           GPL-2.0+
 * License URI:       http://www.gnu.org/licenses/gpl-2.0.txt
 */
?>

<?php if ($this->getKey()): ?>
<script type="text/javascript">
<?php if ($this->getVariablesJs()): ?>
var prSmartsuppVars = {<?php echo $this->getVariablesJs(); ?>};
<?php endif ?>
var _smartsupp = _smartsupp || {};
_smartsupp.key = '<?php echo $this->getKey(); ?>';
_smartsupp.cookieDomain = '<?php echo $this->getCookieDomain(); ?>';
window.smartsupp||(function(d) {
    var o=smartsupp=function(){ o._.push(arguments)},s=d.getElementsByTagName('script')[0],c=d.createElement('script');o._=[];
    c.async=true;c.type='text/javascript';c.charset='utf-8';c.src='//www.smartsuppchat.com/loader.js';s.parentNode.insertBefore(c,s);
})(document);
<?php if ($this->getDashboardName()): ?>
smartsupp("name", "<?php echo $this->getDashboardName(); ?>");
<?php endif ?>
<?php if ($this->getVariablesJs()): ?>
smartsupp("variables", prSmartsuppVars);
<?php endif ?>
<?php if ($this->getOptionalApiJs()): 
echo $this->getOptionalApiJs(); 
endif ?>

</script>
<?php endif ?>